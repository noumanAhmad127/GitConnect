<h1>Edit Your Profile</h1>
<%= form_with(model: @profile, local: true) do |form| %>
  <% if @profile.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@profile.errors.count, "error") %> prohibited this profile from being saved:</h2>
      <ul>
        <% @profile.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
  <div class="field">
    <%= form.label :name %>
    <%= form.text_field :name, required: true %>
  </div>
  <div class="field">
    <%= form.label :email %>
    <%= form.email_field :email, optional: true %>
  </div>
  <div class="field">
    <%= form.label :contact_info %>
    <%= form.text_field :contact_info %>
  </div>
  <div class="field">
    <%= form.label :profile_pic %>
    <%= form.file_field :profile_pic %>
  </div>
  <div class="field">
    <%= form.label :headline %>
    <%= form.text_field :headline %>
  </div>
  <div class="field">
    <%= form.label :city %>
    <%= form.text_field :city %>
  </div>
  <div class="field">
    <%= form.label :social_media_links %>
    <%= form.text_field :social_media_links, placeholder: 'Link 1', name: "profile[social_media_links][]", value: @profile.social_media_links[0] %>
    <%= form.text_field :social_media_links, placeholder: 'Link 2', name: "profile[social_media_links][]", value: @profile.social_media_links[1] %>
    <%= form.text_field :social_media_links, placeholder: 'Link 3', name: "profile[social_media_links][]", value: @profile.social_media_links[2] %>
  </div>
  <div class="field">
    <%= form.label :education, "Education" %>
    <% @profile.education.each_with_index do |edu, index| %>
      <div class="education-entry">
        <%= form.label "education[#{index}][degree]", "Degree" %>
        <%= form.text_field "education[#{index}][degree]", value: edu["degree"], placeholder: "Enter degree" %>
        <%= form.label "education[#{index}][institution]", "Institution" %>
        <%= form.text_field "education[#{index}][institution]", value: edu["institution"], placeholder: "Enter institution" %>
        <%= form.label "education[#{index}][graduation_date]", "Graduation Date" %>
        <%= form.date_select "education[#{index}][graduation_date]", selected: edu["graduation_date"] %>
      </div>
    <% end %>
  </div>
  <div class="field">
    <%= form.label :work_experience, "Work Experience" %>
    <% @profile.work_experience.each_with_index do |exp, index| %>
      <div class="work-entry">
        <%= form.label "work_experience[#{index}][position]", "Position" %>
        <%= form.text_field "work_experience[#{index}][position]", value: exp["position"], placeholder: "e.g. Developer" %>
        <%= form.label "work_experience[#{index}][company]", "Company" %>
        <%= form.text_field "work_experience[#{index}][company]", value: exp["company"], placeholder: "e.g. Company A" %>
        <%= form.label "work_experience[#{index}][duration]", "Duration" %>
        <%= form.text_field "work_experience[#{index}][duration]", value: exp["duration"], placeholder: "e.g. 2020-2022" %>
      </div>
    <% end %>
  </div>
  <div class="actions">
    <%= form.submit "Update Profile" %>
  </div>
<% end %>
