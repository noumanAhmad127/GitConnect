<div class="bg-white w-full flex flex-col gap-5 px-3 md:px-16 lg:px-28 md:flex-row text-[#161931]">
  <aside class="hidden py-4 md:w-1/3 lg:w-1/4 md:block">
    <div class="sticky flex flex-col gap-2 p-4 text-sm border-r border-indigo-100 top-12">
      <h2 class="pl-3 mb-4 text-2xl font-semibold">Settings</h2>
      <a href="#" class="flex items-center px-3 py-2.5 font-bold bg-white text-indigo-900 border rounded-full">
        Public Profile
      </a>
    </div>
  </aside>
  <main class="w-full min-h-screen py-1 md:w-2/3 lg:w-3/4">
    <div class="p-2 md:p-4">
      <div class="w-full px-6 pb-8 mt-8 sm:max-w-xl sm:rounded-lg">
        <h2 class="pl-6 text-2xl font-bold sm:text-xl">Edit Your Profile</h2>
        <div class="grid max-w-2xl mx-auto mt-8">
          <%= form_with(model: @profile, local: true) do |form| %>
            <% if @profile.errors.any? %>
              <div id="error_explanation" class="text-red-600">
                <h2><%= pluralize(@profile.errors.count, "error") %> prohibited this profile from being saved:</h2>
                <ul>
                  <% @profile.errors.full_messages.each do |message| %>
                    <li><%= message %></li>
                  <% end %>
                </ul>
              </div>
            <% end %>
            <div class="flex flex-col items-center gap-4 space-y-5 sm:flex-row sm:space-y-0", style="flex-direction: column;">
              <% if @profile.profile_pic.attached? %>
                <div>
                  <strong>Current Profile Picture:</strong><br>
                  <%= image_tag @profile.profile_pic, alt: "Profile Picture", class: "object-cover w-40 h-40 p-1 rounded-full ring-2 ring-indigo-300" %>
                </div>
              <% end %>
              <label class="py-3.5 px-7 text-base font-medium text-indigo-100 bg-[#202142] rounded-lg hover:bg-indigo-900 cursor-pointer">
                Select File
                <%= form.file_field :profile_pic, class: 'hidden' %>
              </label>
            </div>
            <div class="flex flex-col mt-8 sm:mt-14 text-[#202142]">
              <div class="mb-2">
                <%= form.label :name, "Your Full Name", class: "block mb-2 text-sm font-medium text-indigo-900" %>
                <%= form.text_field :name, class: "bg-indigo-50 border border-indigo-300 text-indigo-900 text-sm rounded-lg p-2.5 w-full", placeholder: "Your name", required: true %>
              </div>
              <div class="mb-2">
                <%= form.label :email, "Your Email", class: "block mb-2 text-sm font-medium text-indigo-900" %>
                <%= form.email_field :email, class: "bg-indigo-50 border border-indigo-300 text-indigo-900 text-sm rounded-lg p-2.5 w-full", placeholder: "your.email@mail.com" %>
              </div>
              <div class="mb-2">
                <%= form.label :contact_info, "Contact Info", class: "block mb-2 text-sm font-medium text-indigo-900" %>
                <%= form.text_field :contact_info, class: "bg-indigo-50 border border-indigo-300 text-indigo-900 text-sm rounded-lg p-2.5 w-full", placeholder: "Your contact info" %>
              </div>
              <div class="mb-2">
                <%= form.label :city, "City", class: "block mb-2 text-sm font-medium text-indigo-900" %>
                <%= form.text_field :city, class: "bg-indigo-50 border border-indigo-300 text-indigo-900 text-sm rounded-lg p-2.5 w-full", placeholder: "Your city" %>
              </div>
              <div class="mb-2">
                <%= form.label :headline, "Headline", class: "block mb-2 text-sm font-medium text-indigo-900" %>
                <%= form.text_field :headline, class: "bg-indigo-50 border border-indigo-300 text-indigo-900 text-sm rounded-lg p-2.5 w-full", placeholder: "Your headline" %>
              </div>
              <div class="mb-2">
                <%= form.label :skill_sets, "Skill Sets (comma-separated)", class: "block mb-2 text-sm font-medium text-indigo-900" %>
                <%= form.text_area :skill_sets, value: @profile.skill_sets.join(', '), class: "bg-indigo-50 border border-indigo-300 text-indigo-900 text-sm rounded-lg p-2.5 w-full", placeholder: "Your skills" %>
              </div>
              <div class="mb-2">
                <%= form.label :social_media_links, "Social Media Links", class: "block mb-2 text-sm font-medium text-indigo-900" %>
                <% @profile.social_media_links.each_with_index do |link, index| %>
                  <%= form.text_field :social_media_links, name: "profile[social_media_links][]", value: link, placeholder: "Enter Link #{index + 1}", class: "bg-indigo-50 border border-indigo-300 text-indigo-900 text-sm rounded-lg p-2.5 my-1 w-full" %>
                <% end %>
              </div>
              <div class="mb-2">
                <%= form.label :education, "Education", class: "block mb-2 text-sm font-medium text-indigo-900" %>
                <% @profile.education.each do |edu| %>
                  <div class="education-entry mb-4">
                    <%= form.text_field "education[][degree]", value: edu["degree"], placeholder: "Enter degree", class: "bg-indigo-50 border border-indigo-300 text-indigo-900 text-sm rounded-lg p-2.5 my-1 w-full" %>
                    <%= form.text_field "education[][institution]", value: edu["institution"], placeholder: "Enter institution", class: "bg-indigo-50 border border-indigo-300 text-indigo-900 text-sm rounded-lg p-2.5 my-1 w-full" %>
                    <%= form.label "education[][graduation_date]", "Graduation Date", class: "inline-block mb-2 mt-2 text-sm font-medium text-indigo-900" %>
                    <%= form.date_field "education[][graduation_date]", value: edu["graduation_date"], class: "mt-2" %>
                  </div>
                <% end %>
              </div>
              <div class="mb-2">
                <%= form.label :work_experience, "Work Experience", class: "block mb-2 text-sm font-medium text-indigo-900" %>
                <% @profile.work_experience.each do |work| %>
                  <div class="work-entry mb-4">
                    <%= form.text_field "work_experience[][position]", value: work["position"], placeholder: "Position", class: "bg-indigo-50 border border-indigo-300 text-indigo-900 text-sm rounded-lg p-2.5 mt-1 w-full" %>
                    <%= form.text_field "work_experience[][company]", value: work["company"], placeholder: "Company", class: "bg-indigo-50 border border-indigo-300 text-indigo-900 text-sm rounded-lg p-2.5 mt-1 w-full" %>
                    <%= form.text_area "work_experience[][responsibilities]", value: work["responsibilities"], placeholder: "Responsibilities..", class: "bg-indigo-50 border border-indigo-300 text-indigo-900 text-sm rounded-lg p-2.5 mt-1 w-full" %>
                    <%= form.label "work_experience[][start_date]", "Start date", class: "inline-block mb-2 mt-2 text-sm font-medium text-indigo-900" %>
                    <%= form.date_field "work_experience[][start_date]", value: work["start_date"], class: "mt-2" %>
                    <%= form.label "work_experience[][end_date]", "End date", class: "inline-block mb-2 mt-2 text-sm font-medium text-indigo-900" %>
                    <%= form.date_field "work_experience[][end_date]", value: work["end_date"], class: "mt-2" %>
                  </div>
                <% end %>
              </div>
            </div>
            <div class="action flex justify-end mb-5">
              <%= form.submit "Save Changes", class: "py-3 px-6 bg-indigo-600 text-white rounded-full hover:bg-indigo-700" %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </main>
</div>
