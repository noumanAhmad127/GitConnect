<h1><%= @post.title %></h1>
<p><%= markdown(@post.content) %></p>
<p><small>Tags: <%= raw @post.tags.map(&:name).map { |t| link_to "##{t}", tag_path(t) }.join(', ') %></small></p>
<% if user_signed_in? %>
  <% if @post.likes.exists?(profile: current_user.profile) %>
    <%= button_to 'Unlike', post_like_path(@post, @post.likes.find_by(profile: current_user.profile)), method: :delete, class: 'btn btn-warning' %>
  <% else %>
    <%= button_to 'Like', post_likes_path(@post), method: :post, class: 'btn btn-primary' %>
  <% end %>
  <p><%= pluralize(@post.likes.count, 'Like') %></p>
<% end %>
<p>Posted by: <%= @post.profile.name %></p>
<%= render 'comments/form', post: @post %>
<%= render 'comments/comments', post: @post %>
<% if user_signed_in?%>
  <%= link_to 'Edit Post', edit_profile_post_path(current_user.profile, @post) %> |
  <%= link_to 'Delete Post', profile_post_path(current_user.profile, @post) , data: {
    turbo_method: :delete,
    turbo_confirm: 'Are you sure?' 
    } %>
<% end%>
<%= link_to 'Back to Posts', posts_path %>
