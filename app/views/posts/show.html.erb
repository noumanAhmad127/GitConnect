<h1 class="text-4xl font-bold mb-2 text-gray-900"><%= @post.title %></h1>
<div class="flex items-center justify-between text-sm text-gray-500 mb-6">
  <div class="flex items-center gap-3">
    <img src="<%= url_for(@post.profile.profile_pic) %>" alt="<%= @post.profile.name %>'s profile picture" class="w-10 h-10 rounded-full object-cover">
    <div>
      <p class="font-semibold text-gray-800"><%= @post.profile.name %></p>
      <p class="text-gray-500"><%= @post.created_at.strftime("%d %B, %Y") %></p>
    </div>
  </div>
</div>
<div class="post-tags mb-6">
  <% if @post.tags.any? %>
    <div class="flex flex-wrap gap-2">
      <% @post.tags.each do |tag| %>
        <%= link_to "##{tag.name}", tag_path(tag), class: 'inline-block bg-blue-100 text-blue-700 text-sm px-3 py-1 rounded-full' %>
      <% end %>
    </div>
  <% end %>
</div>


<div class="post-content text-gray-800 mb-8 leading-relaxed">
  <p><%= markdown(@post.content) %></p>
</div>
<div id="like-btn-<%= @post.id %>" class="like-section flex items-center gap-4 mb-6">
  <%= render 'likes/like_button', post: @post %>
  <p id="like-count-<%= @post.id %>" class="text-gray-600 text-lg"><%= pluralize(@post.likes.count, 'Like') %></p>
</div>


<h3 class="text-lg font-semibold mb-4">Comments - <span class="text-normal">(<%= total_comment_count(@post) %>)</span></h3>
<span></span>
<% if user_signed_in? %>
  <!-- Comment Form -->
  <div class="comment-form mb-6">
    <%= form_for [@post, Comment.new], html: { class: 'comment-form' } do |f| %>
      <div class="mb-4">
        <%= f.text_area :body, placeholder: "Add a comment", class: "w-full p-3 border rounded-lg focus:ring focus:ring-blue-300" %><br/>
      </div>
      <%= f.submit "Add Comment", class: "btn bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700" %>
    <% end %>
  </div>
  <ul class="comment-list list-none pl-0">
    <%= render @post.comments %>
  </ul>
<% else %>
  <ul class="comment-list list-none pl-0">
    <%= render @post.comments %>
  </ul>
<%end%>
<% if user_signed_in? %>
  <div class="post-actions mt-6 flex gap-4">
    <%= link_to 'Edit Post', edit_profile_post_path(current_user.profile, @post), class: 'btn text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400' %>
    <%= button_to 'Delete Post', profile_post_path(current_user.profile, @post),method: :delete, data: {  confirm: 'Are you sure?' }, class: 'btn bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600' %>
  </div>
<% end %>
<div class="mt-6">
  <%= link_to 'Back to Posts', posts_path, class: 'btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300' %>
</div>
